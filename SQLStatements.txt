//DEPRECATED
INSERT INTO Players (Username) VALUES ("Dustin Hengel"),("Brett Miller"),("Tony Willett"),("Eean McNaughton");

//DEPRECATED
INSERT INTO Decks (Name,Link) VALUES ("Tribal Zoo","http://tappedout.net/mtg-decks/5-color-domain-zoo-2/"),("Mono-Blue Tron",""),("Izzet Storm",""),("Jund","");

BEGIN;
INSERT INTO Matches (Wins,Losses,Ties,Date,Tournament,Format) VALUES (1,1,1,STR_TO_DATE("04-13-18","%m-%d-%y"),1,"Modern");
INSERT INTO MatchParts (MatchID,Username,DeckName,DeckLink,OrderedFirst) VALUES (LAST_INSERT_ID(),"Dustin Hengel","Tribal Zoo","http://tappedout.net/mtg-decks/5-color-domain-zoo-2/",1);
INSERT INTO MatchParts (MatchID,Username,DeckName,DeckLink,OrderedFirst) VALUES (LAST_INSERT_ID(),"Tony Willett","Izzet Storm","",0);
COMMIT;

BEGIN;
INSERT INTO Matches (Wins,Losses,Ties,Date,Tournament,Format) VALUES (2,0,0,STR_TO_DATE("04-21-18","%m-%d-%y"),0,"Modern");
INSERT INTO MatchParts (MatchID,Username,DeckName,DeckLink,OrderedFirst) VALUES (LAST_INSERT_ID(),"Brett Miller","Mono-Blue Tron","",1);
INSERT INTO MatchParts (MatchID,Username,DeckName,DeckLink,OrderedFirst) VALUES (LAST_INSERT_ID(),"Dustin Hengel","Tribal Zoo","http://tappedout.net/mtg-decks/5-color-domain-zoo-2/",0);
COMMIT;



SELECT Matches.ID, Matches.Format, Player1Table.Username AS "Player1", Player2Table.Username AS "Player2", Player1Table.DeckName AS "Player1 Deck", Player1Table.DeckLink AS "Player1 Deck Link", Player2Table.DeckName AS "Player2 Deck", Player2Table.DeckLink AS "Player2 Deck Link", Matches.Wins ,Matches.Losses, Matches.Ties, Matches.Date, Matches.Tournament 
FROM Matches
JOIN MatchParts AS Player1Table ON Player1Table.MatchID = Matches.ID AND Player1Table.OrderedFirst = 1
JOIN MatchParts AS Player2Table ON Player2Table.MatchID = Matches.ID AND Player2Table.OrderedFirst = 0;


SELECT Matches.ID, Matches.Format, Player1Table.Username AS "Player1", Player2Table.Username AS "Player2", Player1Table.DeckName AS "Player1 Deck", Player1Table.DeckLink AS "Player1 Deck Link", Player2Table.DeckName AS "Player2 Deck", Player2Table.DeckLink AS "Player2 Deck Link", Matches.Wins ,Matches.Losses, Matches.Ties, Matches.Date, Matches.Tournament 
FROM Matches
JOIN MatchParts AS Player1Table ON Player1Table.MatchID = Matches.ID AND Player1Table.OrderedFirst = 1
JOIN MatchParts AS Player2Table ON Player2Table.MatchID = Matches.ID AND Player2Table.OrderedFirst = 0
WHERE Matches.ID = ?;